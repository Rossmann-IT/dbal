# Doctrine DBAL

This Fork adds the missing capabilities for Oracle 12.x
* Function Based Indexes (with expressions on any index column)
* IDENTITY columns instead of sequences/triggers
* Column-level collations
* Huge performance improvement on schema introspection

### How to use Oracle-specific features:

##### IDENTITY columns

Use `'autoincrement' => true` in the options of a column to define a column as `GENERATED BY DEFAULT ON NULL AS IDENTITY`

##### Column-level collations

Add `'platformOptions' => ['collation' => 'XGERMAN_CI']` to the options array

##### Function Based Indexes

Other DBMS either do not support function based indexes at all or support only one WHERE-condition for the whole index,
that's why Doctrine does not support a convenient way to manage several expressions in one index.
With this fork you can define as many expressions as different column names are mentioned in the expressions.
You have to write the expression exactly in the same way as Oracle stores it in `user_ind_expressions.column_expression`,
except that trailing spaces and double spaces are removed.
Doctrine requires that the expressions are mapped to existing columns, use the column names in the order in which they appear in the expressions. 
It is a known limitation that not every possible combination of expressions can be mapped this way.

Example:
````php
$table->addUniqueIndex(
    ['COLUMN_A', 'COLUMN_B'],
    'UX_INDEX_NAME',
    ['where' => [
        'COLUMN_A' => 'CASE WHEN ("COLUMN_A"=0 AND "COLUMN_B"=1) THEN "COLUMN_C" END',
        'COLUMN_B' => 'CASE WHEN ("COLUMN_A"=0 AND "COLUMN_B"=1) THEN "COLUMN_D" END',
    ]]);
````


## Original README from doctrine/dbal:

| [Master][Master] | [2.11][2.11] |
|:----------------:|:----------:|
| [![Build status][Master image]][Master] | [![Build status][2.11 image]][2.11] |
| [![GitHub Actions][GA master image]][GA master] | [![GitHub Actions][GA 2.11 image]][GA 2.11] |
| [![AppVeyor][AppVeyor master image]][AppVeyor master] | [![AppVeyor][AppVeyor 2.11 image]][AppVeyor 2.11] |
| [![Code Coverage][Coverage image]][CodeCov Master] | [![Code Coverage][Coverage 2.11 image]][CodeCov 2.11] |

Powerful database abstraction layer with many features for database schema introspection, schema management and PDO abstraction.

## More resources:

* [Website](http://www.doctrine-project.org/projects/dbal.html)
* [Documentation](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/)
* [Issue Tracker](https://github.com/doctrine/dbal/issues)

  [Master image]: https://img.shields.io/travis/doctrine/dbal/master.svg?style=flat-square
  [Coverage image]: https://codecov.io/gh/doctrine/dbal/branch/master/graph/badge.svg
  [Master]: https://travis-ci.org/doctrine/dbal
  [CodeCov Master]: https://codecov.io/gh/doctrine/dbal/branch/master
  [AppVeyor master]: https://ci.appveyor.com/project/doctrine/dbal/branch/master
  [AppVeyor master image]: https://ci.appveyor.com/api/projects/status/i88kitq8qpbm0vie/branch/master?svg=true
  [GA master]: https://github.com/doctrine/dbal/actions?query=workflow%3A%22Continuous+Integration%22+branch%3Amaster
  [GA master image]: https://github.com/doctrine/dbal/workflows/Continuous%20Integration/badge.svg

  [2.11 image]: https://img.shields.io/travis/doctrine/dbal/2.11.x.svg?style=flat-square
  [Coverage 2.11 image]: https://codecov.io/gh/doctrine/dbal/branch/2.11.x/graph/badge.svg
  [2.11]: https://github.com/doctrine/dbal/tree/2.11.x
  [CodeCov 2.11]: https://codecov.io/gh/doctrine/dbal/branch/2.11.x
  [AppVeyor 2.11]: https://ci.appveyor.com/project/doctrine/dbal/branch/2.11.x
  [AppVeyor 2.11 image]: https://ci.appveyor.com/api/projects/status/i88kitq8qpbm0vie/branch/2.11.x?svg=true
  [GA 2.11]: https://github.com/doctrine/dbal/actions?query=workflow%3A%22Continuous+Integration%22+branch%3A2.11.x
  [GA 2.11 image]: https://github.com/doctrine/dbal/workflows/Continuous%20Integration/badge.svg?branch=2.11.x
